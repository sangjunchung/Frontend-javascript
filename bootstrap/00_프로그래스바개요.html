<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>프로그래스바 만들기</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <script src="../jQuery/jquery3.7.1.js"></script>
  </head>

  <body>
    <div class="container mt-5">
      <h2>프로그래스 바</h2>
      <pre>
            Progress bar : 작업의 진행 상황을 시각적으로 표시하는 것
            진행하는 상황을 100%로 나타내서 사용자에게 작업이 얼마나
            완료되었는지 직접적으로 보여줌
            단계가 있거나 대기시간이 필요한 작업에서 유용

            속성
            progress : 프로그래스 바의 컨테이너 역활을 함
            progress-bar : 실제로 진행 상황을 표시하는 부분
                -> 부트스트랩에서 기본 색상과 애니메이션 등을 제공
            aria-valuemin : 진행 시작 % 설정, 보통 0%
            aria-valuemax : 진행 끝 % 설정, 보통 100%
            aria-valuenow : 현재 진행률 설정, '현재 작업 50% 다'를 설정
            style : 프로그래스 바의 너비 설정
        </pre
      >

      <div class="progress">
        <div
          id="progressbar"
          class="progress-bar"
          role="progressbar"
          style="width: 0%"
          aria-valuenow="0"
          aria-valuemin="0"
          aria-valuemax="100"
        >
          0%
        </div>
      </div>
      <button id="startBtn" class="btn btn-primary" onclick="startclick()">
        클릭하기
      </button>
    </div>
  </body>
  <script>
    function startclick() {
      const progressbar = $("#progressbar"); // 프로그래스바 표시할 div 가져오기
      let runningRate = 0;

      // setInterval : 일정 시간 간격으로 지정된 작업을 반복적으로 실행하는 js 전용 함수
      //               타이머나, 애니메이션이나 주기적인 데이터 갱신을 할 때 사용
      // setInterval(function(){ 작동할 기능 작성}, 몇 초마다 진행할 것인지 초 설정)

      const running = setInterval(function () {
        // 만약에 100%가 되거나 100% 이상이면 초기화
        if (runningRate >= 100) {
          clearInterval(running);
        } else {
          // 100% 미만 이라면 계속 1%씩 진행률 늘려주기
          runningRate++;
          progressbar.css("width", runningRate + "%"); // style 가로가 변경
          progressbar.attr("aria-valuenow", runningRate); // 속성 값 중에서 now만 변경
          progressbar.text(runningRate + "%"); // text 변경된 글자를 보기 위해 text 변경
        }
      }, 100);
    }
  </script>

  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"
  ></script>
</html>
