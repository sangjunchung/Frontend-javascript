<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>이미지 여러개 가져오기</title>
    <script src="../jQuery/jquery3.7.1.js"></script>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <style></style>
  </head>

  <body>
    <div>
      <h2>사진 2장 업로드</h2>
      <form>
        <div>
          <label>사진 선택</label>
          <!-- multiple 다중 선택 -->
          <input type="file" id="selectImg" accept="image/*" multiple />
        </div>
        <div class="row">
          <div class="col-2">
            <img id="img1" src="#" class="d-none img-fluid" />
          </div>
          <div class="col-2">
            <img id="img2" src="#" class="d-none img-fluid" />
          </div>
          <div class="col-2">
            <img id="img3" src="#" class="d-none img-fluid" />
          </div>
          <div class="col-2">
            <img id="img4" src="#" class="d-none img-fluid" />
          </div>
          <div class="col-2">
            <img id="img5" src="#" class="d-none img-fluid" />
          </div>
          <div class="col-1">
            <img id="img6" src="#" class="d-none img-fluid" />
          </div>
          <div class="col-1">
            <img id="img7" src="#" class="d-none img-fluid" />
          </div>
        </div>
      </form>
    </div>
    <script>
      $(document).ready(function () {
        $("#selectImg").change(function () {
          const files = this.files;
          const num = $("img").last().attr("id").replace(/[a-zA-z]/g, "");
          /*
          if (files) {
            const readFile = new FileReader();

            readFile.onload = function (e) {
              $("#img1").attr("src", e.target.result).removeClass("d-none");
            };
            readFile.readAsDataURL(files[0]);


            const readFile2 = new FileReader();
            readFile2.onload = function(e) {
                $("#img2").attr('src', e.target.result).removeClass("d-none");
            }
            readFile2.readAsDataURL(files[1]);
          }*/
          if (files) {
            for (let i = 0; i < num; i++) {
              let readFile = new FileReader();

              readFile.onload = function (e) {
                $("#img" + (i + 1))
                  .attr("src", e.target.result)
                  .removeClass("d-none");
              };
              readFile.readAsDataURL(files[i]);
            }
          }
        });
      });
    </script>
  </body>
</html>
